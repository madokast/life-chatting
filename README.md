# Life Chatting

一个融合日记记录与 AI 智能对话的人生管理应用，通过 AI 深度理解用户的生活轨迹，提供个性化的人生建议。

## 功能特性

- **📝 日记记录**：便捷撰写日记，支持附件上传，时间线展示
- **🤖 AI 智能对话**：AI 阅读用户日记，提供个性化人生建议（需自行配置 AI API Key）
- **🌍 国际化支持**：内置中英文，自动检测系统语言，支持手动切换
- **📤 数据管理**：支持 WebDAV 同步、数据导出导入（需自行配置 WebDAV 服务器）
- **🚀 开箱即用**：无需注册，无需配置，打开即用

## 技术栈

- **前端框架**：Vite + React + TypeScript
- **UI 框架**：React + Tailwind CSS + shadcn/ui
- **状态管理**：Zustand
- **本地存储**：IndexedDB (通过 Dexie.js 封装)
- **PWA 支持**：vite-plugin-pwa
- **国际化**：i18next + react-i18next
- **AI 集成**：客户端直接调用 OpenAI/Anthropic API
- **数据同步**：WebDAV 客户端直连
- **文件处理**：JSZip (打包/解压 ZIP)
- **路由**：React Router v6

## 架构设计

### 纯静态应用
- 完全无后端，可部署到任意静态托管平台（GitHub Pages、Vercel、Netlify 等）
- 所有数据存储在客户端，隐私性最佳
- 支持离线使用，PWA 可安装到手机桌面

### 开箱即用
- 用户首次进入即可开始使用日记功能
- 无需注册账号，无需配置即可记录生活
- 所有数据优先存储在本地，无需网络即可使用

### 核心功能

#### 日记记录
- **便捷记录**：像发帖一样轻松撰写日记，记录生活中的点滴
- **附件支持**：支持上传图片、文档等多种附件，丰富日记内容
- **时间线展示**：按时间轴整理展示，回顾生活轨迹

#### AI 智能对话
- **⚠️ 使用前提**：需要用户自行配置 AI API Key（支持 OpenAI、Anthropic 等）
- **配置方式**：在应用设置中输入 API Key，存储在本地 IndexedDB，不经过任何服务器
- **自然交互**：用户通过自然语言与 AI 交流，无需手动指定数据范围
- **智能工具调用**：AI 通过 Function Calling 调用工具获取数据
  - **日记查询工具**：获取最近 N 天的日记、获取最近的 N 条日记
  - **全文搜索工具**：根据关键词搜索日记内容
  - **用户画像工具**：获取 AI 维护的用户画像信息
- **用户画像**：
  - AI 自动维护一个数百到数千字的用户画像文件
  - 通过阅读用户日记和与用户交流，逐渐形成对用户的全面了解
  - 画像文件对用户不可见，仅 AI 内部使用
  - 新对话时可直接基于用户画像提供个性化建议
- **个性化建议**：基于用户画像和日记内容，提供针对性的人生建议
  - **短期规划**：帮助制定一天内的计划和任务安排
  - **中期目标**：协助设定和达成周、月度目标
  - **长期规划**：提供职业发展、人生方向等长期建议
- **持续对话**：与 AI 进行多轮对话，深入探讨人生问题

#### 国际化支持
- **多语言支持**：开发时内置中文和英文语言包
- **自动检测**：应用启动时自动根据系统语言选择对应语言
- **手动切换**：用户可在设置中手动切换语言（中文/英文）
- **可扩展性**：架构支持后续添加更多语言

### 数据管理

#### WebDAV 同步
- **⚠️ 使用前提**：需要用户自行配置 WebDAV 服务器信息
- **配置方式**：在应用设置中输入 WebDAV 服务器地址、用户名、密码等信息
- **支持手动触发同步**：将本地数据备份到 WebDAV
- **支持从 WebDAV 恢复数据**
- **冲突解决在客户端处理**
- **推荐服务**：坚果云、InfiniCLOUD、Nextcloud 等支持 WebDAV 的云存储服务

#### 数据导出导入
- **导出功能**：
  - 配置和文本数据导出为 JSON 文件
  - 图片等附件文件导出到 assets 文件夹
  - 所有文件打包为 ZIP 压缩包
  - 浏览器环境：直接下载 ZIP 文件
  - 移动端（PWA）：支持分享 ZIP 文件
- **导入功能**：
  - 选择 ZIP 文件进行导入
  - 导入时覆盖本地所有数据
  - 适用于数据迁移或备份恢复

### 数据存储策略

#### 数据类型
- **用户配置**：应用设置、主题偏好、API 配置等
- **日记文本**：日记内容、标签、时间戳等
- **AI 聊天文本**：与 AI 的对话历史记录
- **用户画像**：AI 自动维护的用户画像文件（数百到数千字，对用户不可见）
- **多媒体数据**：图片、文档等附件文件

#### 存储方案
- **浏览器环境**：所有数据存储在 IndexedDB 中，容量可达数百 MB
- **移动端（PWA）**：调用平台功能存储在应用目录中

## 开发计划

- [ ] 初始化 Vite + React + TypeScript 项目
- [ ] 配置 PWA 支持
- [ ] 搭建基础 UI 框架（shadcn/ui）
- [ ] 配置国际化支持（i18next）
- [ ] 实现 IndexedDB 数据存储层
- [ ] 实现日记模块（增删改查、附件上传）
- [ ] 实现 AI 聊天模块
- [ ] 实现 WebDAV 同步功能
- [ ] 实现数据导出导入功能（ZIP 打包/解压）
- [ ] 实现设置页面（语言切换、API Key、WebDAV 配置）
- [ ] 响应式设计优化
- [ ] PWA 功能测试
